{"version":3,"sources":["../src/lib/directive.ts","../src/lib/dom.ts","../src/lib/part.ts","../src/lib/template.ts","../src/lib/template-instance.ts","../src/lib/template-result.ts","../src/lib/parts.ts","../src/lib/default-template-processor.ts","../src/lib/template-factory.ts","../src/lib/render.ts","src/lit-html.ts","app/store/actions.js","node_modules/symbol-observable/es/ponyfill.js","node_modules/symbol-observable/es/index.js","node_modules/redux/es/redux.js","app/store/reducers.js","app/store/store.js","app/components/Header.js","app/components/Todo.js","app/components/Main.js","app/components/Footer.js","app/components/App.js","node_modules/director/build/director.js","app/main.js"],"names":["ADD_TODO","TOGGLE_TODO","DELETE_TODO","CLEAR_COMPLETED","SET_VISIBILITY_FILTER","VisibilityFilters","SHOW_ALL","SHOW_COMPLETED","SHOW_ACTIVE","addTodo","text","type","toggleTodo","index","deleteTodo","clearCompleted","setVisibilityFilter","filter","symbolObservablePonyfill","root","result","Symbol","observable","self","window","global","module","Function","randomString","Math","random","toString","substring","split","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","obj","proto","Object","getPrototypeOf","createStore","reducer","preloadedState","enhancer","_ref2","arguments","Error","undefined","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","slice","getState","subscribe","listener","isSubscribed","push","unsubscribe","indexOf","splice","dispatch","action","listeners","i","length","replaceReducer","nextReducer","_ref","outerSubscribe","observer","TypeError","observeState","next","$$observable","warning","message","console","error","e","getUndefinedStateErrorMessage","key","actionType","actionDescription","String","getUnexpectedStateShapeWarningMessage","inputState","reducers","unexpectedKeyCache","reducerKeys","keys","argumentName","call","match","unexpectedKeys","hasOwnProperty","forEach","assertReducerShape","initialState","combineReducers","finalReducers","finalReducerKeys","shapeAssertionError","combination","state","warningMessage","hasChanged","nextState","_i","_key","previousStateForKey","nextStateForKey","errorMessage","bindActionCreator","actionCreator","apply","bindActionCreators","actionCreators","boundActionCreators","_defineProperty","value","defineProperty","enumerable","configurable","writable","_objectSpread","target","source","ownKeys","getOwnPropertySymbols","concat","sym","getOwnPropertyDescriptor","compose","_len","funcs","Array","arg","reduce","a","b","applyMiddleware","middlewares","store","_dispatch","middlewareAPI","chain","map","middleware","isCrushed","name","visibilityFilter","todos","completed","todo","_","todoApp","__REDUX_DEVTOOLS_EXTENSION__","onKeyUp","keyCode","srcElement","trim","Header","html","onClickTodo","Number","getAttribute","onClickDestroy","Todo","id","todosByVisibilityFilter","Main","filteredTodos","onClickClearCompleted","itemLeftCount","itemCompletedCount","Footer","App","exports","dloc","document","location","dlocHashEmpty","hash","mode","history","check","h","onHashChanged","fire","onpopstate","onhashchange","init","fn","Router","onchange","onChangeEvent","l","documentMode","setTimeout","frame","createElement","style","display","body","appendChild","writeFrame","attachEvent","event","propertyName","setInterval","destroy","setHash","s","pushState","title","f","getElementById","d","contentDocument","contentWindow","open","write","close","syncHash","_hash","routes","params","methods","scope","_methods","_insert","insert","insertEx","historySupport","configure","mount","prototype","r","routeTo","handler","newURL","url","getPath","replace","charAt","convert_hash_in_init","replaceState","run_in_init","explode","v","setRoute","val","method","path","route","parent","once","getRoute","ret","pathname","substr","_every","arr","iterator","_flatten","flat","n","_asyncEverySeries","callback","iterate","err","paramifyString","str","mod","param","regifyString","matches","last","out","captures","capture","terminator","delimiter","start","stop","left","right","chunk","tmp","QUERY_SEPARATOR","options","recurse","async","strict","notfound","resource","html5history","run_handler_in_init","every","after","before","on","token","matcher","compiled","RegExp","isArray","p","m","toLowerCase","routesFn","fns","traverse","invoked","_invoked","invoke","reverse","updateAndInvoke","runlist","thisArg","regexp","current","exact","that","filterRoutes","deepCopy","applyFilter","newRoutes","matched","Boolean","methodType","parentType","nested","part","shift","test","extend","len","extra","insertOrMount","local","rename","parts","routeType","isRoute","router","renderApp"],"mappings":"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","file":"main.6397c36a.map","sourceRoot":"..","sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\n\nconst directives = new WeakMap<object, true>();\n\n// tslint:disable-next-line:no-any\nexport type DirectiveFactory = (...args: any[]) => object;\n\nexport type DirectiveFn = (part: Part) => void;\n\n/**\n * Brands a function as a directive so that lit-html will call the function\n * during template rendering, rather than passing as a value.\n *\n * @param f The directive factory function. Must be a function that returns a\n * function of the signature `(part: Part) => void`. The returned function will\n * be called with the part object\n *\n * @example\n *\n * ```\n * import {directive, html} from 'lit-html';\n *\n * const immutable = directive((v) => (part) => {\n *   if (part.value !== v) {\n *     part.setValue(v)\n *   }\n * });\n * ```\n */\n// tslint:disable-next-line:no-any\nexport const directive = <F extends DirectiveFactory>(f: F): F =>\n    ((...args: unknown[]) => {\n      const d = f(...args);\n      directives.set(d, true);\n      return d;\n    }) as F;\n\nexport const isDirective = (o: unknown): o is DirectiveFn => {\n  return typeof o === 'function' && directives.has(o);\n};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\ninterface MaybePolyfilledCe extends CustomElementRegistry {\n  polyfillWrapFlushCallback?: object;\n}\n\n/**\n * True if the custom elements polyfill is in use.\n */\nexport const isCEPolyfill = window.customElements !== undefined &&\n    (window.customElements as MaybePolyfilledCe).polyfillWrapFlushCallback !==\n        undefined;\n\n/**\n * Reparents nodes, starting from `startNode` (inclusive) to `endNode`\n * (exclusive), into another container (could be the same container), before\n * `beforeNode`. If `beforeNode` is null, it appends the nodes to the\n * container.\n */\nexport const reparentNodes =\n    (container: Node,\n     start: Node|null,\n     end: Node|null = null,\n     before: Node|null = null): void => {\n      let node = start;\n      while (node !== end) {\n        const n = node!.nextSibling;\n        container.insertBefore(node!, before as Node);\n        node = n;\n      }\n    };\n\n/**\n * Removes nodes, starting from `startNode` (inclusive) to `endNode`\n * (exclusive), from `container`.\n */\nexport const removeNodes =\n    (container: Node, startNode: Node|null, endNode: Node|null = null):\n        void => {\n          let node = startNode;\n          while (node !== endNode) {\n            const n = node!.nextSibling;\n            container.removeChild(node!);\n            node = n;\n          }\n        };\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\n/**\n * The Part interface represents a dynamic part of a template instance rendered\n * by lit-html.\n */\nexport interface Part {\n  value: unknown;\n\n  /**\n   * Sets the current part value, but does not write it to the DOM.\n   * @param value The value that will be committed.\n   */\n  setValue(value: unknown): void;\n\n  /**\n   * Commits the current part value, cause it to actually be written to the DOM.\n   */\n  commit(): void;\n}\n\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange: object = {};\n\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\nexport const nothing = {};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\n\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nexport const marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nexport const nodeMarker = `<!--${marker}-->`;\n\nexport const markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n\n/**\n * Suffix appended to all bound attribute names.\n */\nexport const boundAttributeSuffix = '$lit$';\n\n/**\n * An updateable Template that tracks the location of dynamic parts.\n */\nexport class Template {\n  parts: TemplatePart[] = [];\n  element: HTMLTemplateElement;\n\n  constructor(result: TemplateResult, element: HTMLTemplateElement) {\n    this.element = element;\n    let index = -1;\n    let partIndex = 0;\n    const nodesToRemove: Node[] = [];\n    const _prepareTemplate = (template: HTMLTemplateElement) => {\n      const content = template.content;\n      // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be\n      // null\n      const walker = document.createTreeWalker(\n          content,\n          133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n          null,\n          false);\n      // Keeps track of the last index associated with a part. We try to delete\n      // unnecessary nodes, but we never want to associate two different parts\n      // to the same index. They must have a constant node between.\n      let lastPartIndex = 0;\n      while (walker.nextNode()) {\n        index++;\n        const node = walker.currentNode as Element | Comment | Text;\n        if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n          if ((node as Element).hasAttributes()) {\n            const attributes = (node as Element).attributes;\n            // Per\n            // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n            // attributes are not guaranteed to be returned in document order.\n            // In particular, Edge/IE can return them out of order, so we cannot\n            // assume a correspondance between part index and attribute index.\n            let count = 0;\n            for (let i = 0; i < attributes.length; i++) {\n              if (attributes[i].value.indexOf(marker) >= 0) {\n                count++;\n              }\n            }\n            while (count-- > 0) {\n              // Get the template literal section leading up to the first\n              // expression in this attribute\n              const stringForPart = result.strings[partIndex];\n              // Find the attribute name\n              const name = lastAttributeNameRegex.exec(stringForPart)![2];\n              // Find the corresponding attribute\n              // All bound attributes have had a suffix added in\n              // TemplateResult#getHTML to opt out of special attribute\n              // handling. To look up the attribute value we also need to add\n              // the suffix.\n              const attributeLookupName =\n                  name.toLowerCase() + boundAttributeSuffix;\n              const attributeValue =\n                  (node as Element).getAttribute(attributeLookupName)!;\n              const strings = attributeValue.split(markerRegex);\n              this.parts.push({type: 'attribute', index, name, strings});\n              (node as Element).removeAttribute(attributeLookupName);\n              partIndex += strings.length - 1;\n            }\n          }\n          if ((node as Element).tagName === 'TEMPLATE') {\n            _prepareTemplate(node as HTMLTemplateElement);\n          }\n        } else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n          const data = (node as Text).data!;\n          if (data.indexOf(marker) >= 0) {\n            const parent = node.parentNode!;\n            const strings = data.split(markerRegex);\n            const lastIndex = strings.length - 1;\n            // Generate a new text node for each literal section\n            // These nodes are also used as the markers for node parts\n            for (let i = 0; i < lastIndex; i++) {\n              parent.insertBefore(\n                  (strings[i] === '') ? createMarker() :\n                                        document.createTextNode(strings[i]),\n                  node);\n              this.parts.push({type: 'node', index: ++index});\n            }\n            // If there's no text, we must insert a comment to mark our place.\n            // Else, we can trust it will stick around after cloning.\n            if (strings[lastIndex] === '') {\n              parent.insertBefore(createMarker(), node);\n              nodesToRemove.push(node);\n            } else {\n              (node as Text).data = strings[lastIndex];\n            }\n            // We have a part for each match found\n            partIndex += lastIndex;\n          }\n        } else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n          if ((node as Comment).data === marker) {\n            const parent = node.parentNode!;\n            // Add a new marker node to be the startNode of the Part if any of\n            // the following are true:\n            //  * We don't have a previousSibling\n            //  * The previousSibling is already the start of a previous part\n            if (node.previousSibling === null || index === lastPartIndex) {\n              index++;\n              parent.insertBefore(createMarker(), node);\n            }\n            lastPartIndex = index;\n            this.parts.push({type: 'node', index});\n            // If we don't have a nextSibling, keep this node so we have an end.\n            // Else, we can remove it to save future costs.\n            if (node.nextSibling === null) {\n              (node as Comment).data = '';\n            } else {\n              nodesToRemove.push(node);\n              index--;\n            }\n            partIndex++;\n          } else {\n            let i = -1;\n            while ((i = (node as Comment).data!.indexOf(marker, i + 1)) !==\n                   -1) {\n              // Comment node has a binding marker inside, make an inactive part\n              // The binding won't work, but subsequent bindings will\n              // TODO (justinfagnani): consider whether it's even worth it to\n              // make bindings in comments work\n              this.parts.push({type: 'node', index: -1});\n            }\n          }\n        }\n      }\n    };\n    _prepareTemplate(element);\n    // Remove text binding nodes after the walk to not disturb the TreeWalker\n    for (const n of nodesToRemove) {\n      n.parentNode!.removeChild(n);\n    }\n  }\n}\n\n/**\n * A placeholder for a dynamic expression in an HTML template.\n *\n * There are two built-in part types: AttributePart and NodePart. NodeParts\n * always represent a single dynamic expression, while AttributeParts may\n * represent as many expressions are contained in the attribute.\n *\n * A Template's parts are mutable, so parts can be replaced or modified\n * (possibly to implement different template semantics). The contract is that\n * parts can only be replaced, not removed, added or reordered, and parts must\n * always consume the correct number of values in their `update()` method.\n *\n * TODO(justinfagnani): That requirement is a little fragile. A\n * TemplateInstance could instead be more careful about which values it gives\n * to Part.update().\n */\nexport type TemplatePart = {\n  type: 'node',\n  index: number\n}|{type: 'attribute', index: number, name: string, strings: string[]};\n\nexport const isTemplatePartActive = (part: TemplatePart) => part.index !== -1;\n\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nexport const createMarker = () => document.createComment('');\n\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#attributes-0\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-character\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nexport const lastAttributeNameRegex =\n    /([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \\x09\\x0a\\x0c\\x0d\"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isCEPolyfill} from './dom.js';\nimport {Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {isTemplatePartActive, Template} from './template.js';\n\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nexport class TemplateInstance {\n  _parts: Array<Part|undefined> = [];\n  processor: TemplateProcessor;\n  options: RenderOptions;\n  template: Template;\n\n  constructor(\n      template: Template, processor: TemplateProcessor,\n      options: RenderOptions) {\n    this.template = template;\n    this.processor = processor;\n    this.options = options;\n  }\n\n  update(values: unknown[]) {\n    let i = 0;\n    for (const part of this._parts) {\n      if (part !== undefined) {\n        part.setValue(values[i]);\n      }\n      i++;\n    }\n    for (const part of this._parts) {\n      if (part !== undefined) {\n        part.commit();\n      }\n    }\n  }\n\n  _clone(): DocumentFragment {\n    // When using the Custom Elements polyfill, clone the node, rather than\n    // importing it, to keep the fragment in the template's document. This\n    // leaves the fragment inert so custom elements won't upgrade and\n    // potentially modify their contents by creating a polyfilled ShadowRoot\n    // while we traverse the tree.\n    const fragment = isCEPolyfill ?\n        this.template.element.content.cloneNode(true) as DocumentFragment :\n        document.importNode(this.template.element.content, true);\n\n    const parts = this.template.parts;\n    let partIndex = 0;\n    let nodeIndex = 0;\n    const _prepareInstance = (fragment: DocumentFragment) => {\n      // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be\n      // null\n      const walker = document.createTreeWalker(\n          fragment,\n          133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n          null,\n          false);\n      let node = walker.nextNode();\n      // Loop through all the nodes and parts of a template\n      while (partIndex < parts.length && node !== null) {\n        const part = parts[partIndex];\n        // Consecutive Parts may have the same node index, in the case of\n        // multiple bound attributes on an element. So each iteration we either\n        // increment the nodeIndex, if we aren't on a node with a part, or the\n        // partIndex if we are. By not incrementing the nodeIndex when we find a\n        // part, we allow for the next part to be associated with the current\n        // node if neccessasry.\n        if (!isTemplatePartActive(part)) {\n          this._parts.push(undefined);\n          partIndex++;\n        } else if (nodeIndex === part.index) {\n          if (part.type === 'node') {\n            const part = this.processor.handleTextExpression(this.options);\n            part.insertAfterNode(node.previousSibling!);\n            this._parts.push(part);\n          } else {\n            this._parts.push(...this.processor.handleAttributeExpressions(\n                node as Element, part.name, part.strings, this.options));\n          }\n          partIndex++;\n        } else {\n          nodeIndex++;\n          if (node.nodeName === 'TEMPLATE') {\n            _prepareInstance((node as HTMLTemplateElement).content);\n          }\n          node = walker.nextNode();\n        }\n      }\n    };\n    _prepareInstance(fragment);\n    if (isCEPolyfill) {\n      document.adoptNode(fragment);\n      customElements.upgrade(fragment);\n    }\n    return fragment;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {reparentNodes} from './dom.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {boundAttributeSuffix, lastAttributeNameRegex, marker, nodeMarker} from './template.js';\n\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n  strings: TemplateStringsArray;\n  values: unknown[];\n  type: string;\n  processor: TemplateProcessor;\n\n  constructor(\n      strings: TemplateStringsArray, values: unknown[], type: string,\n      processor: TemplateProcessor) {\n    this.strings = strings;\n    this.values = values;\n    this.type = type;\n    this.processor = processor;\n  }\n\n  /**\n   * Returns a string of HTML used to create a `<template>` element.\n   */\n  getHTML(): string {\n    const endIndex = this.strings.length - 1;\n    let html = '';\n    for (let i = 0; i < endIndex; i++) {\n      const s = this.strings[i];\n      // This exec() call does two things:\n      // 1) Appends a suffix to the bound attribute name to opt out of special\n      // attribute value parsing that IE11 and Edge do, like for style and\n      // many SVG attributes. The Template class also appends the same suffix\n      // when looking up attributes to create Parts.\n      // 2) Adds an unquoted-attribute-safe marker for the first expression in\n      // an attribute. Subsequent attribute expressions will use node markers,\n      // and this is safe since attributes with multiple expressions are\n      // guaranteed to be quoted.\n      const match = lastAttributeNameRegex.exec(s);\n      if (match) {\n        // We're starting a new bound attribute.\n        // Add the safe attribute suffix, and use unquoted-attribute-safe\n        // marker.\n        html += s.substr(0, match.index) + match[1] + match[2] +\n            boundAttributeSuffix + match[3] + marker;\n      } else {\n        // We're either in a bound node, or trailing bound attribute.\n        // Either way, nodeMarker is safe to use.\n        html += s + nodeMarker;\n      }\n    }\n    return html + this.strings[endIndex];\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = document.createElement('template');\n    template.innerHTML = this.getHTML();\n    return template;\n  }\n}\n\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTMl in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nexport class SVGTemplateResult extends TemplateResult {\n  getHTML(): string {\n    return `<svg>${super.getHTML()}</svg>`;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = super.getTemplateElement();\n    const content = template.content;\n    const svgElement = content.firstChild!;\n    content.removeChild(svgElement);\n    reparentNodes(content, svgElement.firstChild);\n    return template;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isDirective} from './directive.js';\nimport {removeNodes} from './dom.js';\nimport {noChange, nothing, Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {createMarker} from './template.js';\n\n// https://tc39.github.io/ecma262/#sec-typeof-operator\nexport type Primitive = null|undefined|boolean|number|string|Symbol|bigint;\nexport const isPrimitive = (value: unknown): value is Primitive => {\n  return (\n      value === null ||\n      !(typeof value === 'object' || typeof value === 'function'));\n};\n\n/**\n * Sets attribute values for AttributeParts, so that the value is only set once\n * even if there are multiple parts for an attribute.\n */\nexport class AttributeCommitter {\n  element: Element;\n  name: string;\n  strings: string[];\n  parts: AttributePart[];\n  dirty = true;\n\n  constructor(element: Element, name: string, strings: string[]) {\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n    this.parts = [];\n    for (let i = 0; i < strings.length - 1; i++) {\n      this.parts[i] = this._createPart();\n    }\n  }\n\n  /**\n   * Creates a single part. Override this to create a differnt type of part.\n   */\n  protected _createPart(): AttributePart {\n    return new AttributePart(this);\n  }\n\n  protected _getValue(): unknown {\n    const strings = this.strings;\n    const l = strings.length - 1;\n    let text = '';\n\n    for (let i = 0; i < l; i++) {\n      text += strings[i];\n      const part = this.parts[i];\n      if (part !== undefined) {\n        const v = part.value;\n        if (v != null &&\n            (Array.isArray(v) ||\n             // tslint:disable-next-line:no-any\n             typeof v !== 'string' && (v as any)[Symbol.iterator])) {\n          for (const t of v as Iterable<unknown>) {\n            text += typeof t === 'string' ? t : String(t);\n          }\n        } else {\n          text += typeof v === 'string' ? v : String(v);\n        }\n      }\n    }\n\n    text += strings[l];\n    return text;\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      this.element.setAttribute(this.name, this._getValue() as string);\n    }\n  }\n}\n\nexport class AttributePart implements Part {\n  committer: AttributeCommitter;\n  value: unknown = undefined;\n\n  constructor(comitter: AttributeCommitter) {\n    this.committer = comitter;\n  }\n\n  setValue(value: unknown): void {\n    if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n      this.value = value;\n      // If the value is a not a directive, dirty the committer so that it'll\n      // call setAttribute. If the value is a directive, it'll dirty the\n      // committer if it calls setValue().\n      if (!isDirective(value)) {\n        this.committer.dirty = true;\n      }\n    }\n  }\n\n  commit() {\n    while (isDirective(this.value)) {\n      const directive = this.value;\n      this.value = noChange;\n      directive(this);\n    }\n    if (this.value === noChange) {\n      return;\n    }\n    this.committer.commit();\n  }\n}\n\nexport class NodePart implements Part {\n  options: RenderOptions;\n  startNode!: Node;\n  endNode!: Node;\n  value: unknown = undefined;\n  _pendingValue: unknown = undefined;\n\n  constructor(options: RenderOptions) {\n    this.options = options;\n  }\n\n  /**\n   * Inserts this part into a container.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendInto(container: Node) {\n    this.startNode = container.appendChild(createMarker());\n    this.endNode = container.appendChild(createMarker());\n  }\n\n  /**\n   * Inserts this part between `ref` and `ref`'s next sibling. Both `ref` and\n   * its next sibling must be static, unchanging nodes such as those that appear\n   * in a literal section of a template.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterNode(ref: Node) {\n    this.startNode = ref;\n    this.endNode = ref.nextSibling!;\n  }\n\n  /**\n   * Appends this part into a parent part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendIntoPart(part: NodePart) {\n    part._insert(this.startNode = createMarker());\n    part._insert(this.endNode = createMarker());\n  }\n\n  /**\n   * Appends this part after `ref`\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterPart(ref: NodePart) {\n    ref._insert(this.startNode = createMarker());\n    this.endNode = ref.endNode;\n    ref.endNode = this.startNode;\n  }\n\n  setValue(value: unknown): void {\n    this._pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this._pendingValue)) {\n      const directive = this._pendingValue;\n      this._pendingValue = noChange;\n      directive(this);\n    }\n    const value = this._pendingValue;\n    if (value === noChange) {\n      return;\n    }\n    if (isPrimitive(value)) {\n      if (value !== this.value) {\n        this._commitText(value);\n      }\n    } else if (value instanceof TemplateResult) {\n      this._commitTemplateResult(value);\n    } else if (value instanceof Node) {\n      this._commitNode(value);\n    } else if (\n        Array.isArray(value) ||\n        // tslint:disable-next-line:no-any\n        (value as any)[Symbol.iterator]) {\n      this._commitIterable(value as Iterable<unknown>);\n    } else if (value === nothing) {\n      this.value = nothing;\n      this.clear();\n    } else {\n      // Fallback, will render the string representation\n      this._commitText(value);\n    }\n  }\n\n  private _insert(node: Node) {\n    this.endNode.parentNode!.insertBefore(node, this.endNode);\n  }\n\n  private _commitNode(value: Node): void {\n    if (this.value === value) {\n      return;\n    }\n    this.clear();\n    this._insert(value);\n    this.value = value;\n  }\n\n  private _commitText(value: unknown): void {\n    const node = this.startNode.nextSibling!;\n    value = value == null ? '' : value;\n    if (node === this.endNode.previousSibling &&\n        node.nodeType === 3 /* Node.TEXT_NODE */) {\n      // If we only have a single text node between the markers, we can just\n      // set its value, rather than replacing it.\n      // TODO(justinfagnani): Can we just check if this.value is primitive?\n      (node as Text).data = value as string;\n    } else {\n      this._commitNode(document.createTextNode(\n          typeof value === 'string' ? value : String(value)));\n    }\n    this.value = value;\n  }\n\n  private _commitTemplateResult(value: TemplateResult): void {\n    const template = this.options.templateFactory(value);\n    if (this.value instanceof TemplateInstance &&\n        this.value.template === template) {\n      this.value.update(value.values);\n    } else {\n      // Make sure we propagate the template processor from the TemplateResult\n      // so that we use its syntax extension, etc. The template factory comes\n      // from the render function options so that it can control template\n      // caching and preprocessing.\n      const instance =\n          new TemplateInstance(template, value.processor, this.options);\n      const fragment = instance._clone();\n      instance.update(value.values);\n      this._commitNode(fragment);\n      this.value = instance;\n    }\n  }\n\n  private _commitIterable(value: Iterable<unknown>): void {\n    // For an Iterable, we create a new InstancePart per item, then set its\n    // value to the item. This is a little bit of overhead for every item in\n    // an Iterable, but it lets us recurse easily and efficiently update Arrays\n    // of TemplateResults that will be commonly returned from expressions like:\n    // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n\n    // If _value is an array, then the previous render was of an\n    // iterable and _value will contain the NodeParts from the previous\n    // render. If _value is not an array, clear this part and make a new\n    // array for NodeParts.\n    if (!Array.isArray(this.value)) {\n      this.value = [];\n      this.clear();\n    }\n\n    // Lets us keep track of how many items we stamped so we can clear leftover\n    // items from a previous render\n    const itemParts = this.value as NodePart[];\n    let partIndex = 0;\n    let itemPart: NodePart|undefined;\n\n    for (const item of value) {\n      // Try to reuse an existing part\n      itemPart = itemParts[partIndex];\n\n      // If no existing part, create a new one\n      if (itemPart === undefined) {\n        itemPart = new NodePart(this.options);\n        itemParts.push(itemPart);\n        if (partIndex === 0) {\n          itemPart.appendIntoPart(this);\n        } else {\n          itemPart.insertAfterPart(itemParts[partIndex - 1]);\n        }\n      }\n      itemPart.setValue(item);\n      itemPart.commit();\n      partIndex++;\n    }\n\n    if (partIndex < itemParts.length) {\n      // Truncate the parts array so _value reflects the current state\n      itemParts.length = partIndex;\n      this.clear(itemPart && itemPart!.endNode);\n    }\n  }\n\n  clear(startNode: Node = this.startNode) {\n    removeNodes(\n        this.startNode.parentNode!, startNode.nextSibling!, this.endNode);\n  }\n}\n\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nexport class BooleanAttributePart implements Part {\n  element: Element;\n  name: string;\n  strings: string[];\n  value: unknown = undefined;\n  _pendingValue: unknown = undefined;\n\n  constructor(element: Element, name: string, strings: string[]) {\n    if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n      throw new Error(\n          'Boolean attributes can only contain a single expression');\n    }\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n  }\n\n  setValue(value: unknown): void {\n    this._pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this._pendingValue)) {\n      const directive = this._pendingValue;\n      this._pendingValue = noChange;\n      directive(this);\n    }\n    if (this._pendingValue === noChange) {\n      return;\n    }\n    const value = !!this._pendingValue;\n    if (this.value !== value) {\n      if (value) {\n        this.element.setAttribute(this.name, '');\n      } else {\n        this.element.removeAttribute(this.name);\n      }\n    }\n    this.value = value;\n    this._pendingValue = noChange;\n  }\n}\n\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nexport class PropertyCommitter extends AttributeCommitter {\n  single: boolean;\n\n  constructor(element: Element, name: string, strings: string[]) {\n    super(element, name, strings);\n    this.single =\n        (strings.length === 2 && strings[0] === '' && strings[1] === '');\n  }\n\n  protected _createPart(): PropertyPart {\n    return new PropertyPart(this);\n  }\n\n  _getValue() {\n    if (this.single) {\n      return this.parts[0].value;\n    }\n    return super._getValue();\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      // tslint:disable-next-line:no-any\n      (this.element as any)[this.name] = this._getValue();\n    }\n  }\n}\n\nexport class PropertyPart extends AttributePart {}\n\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the thrid\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n\ntry {\n  const options = {\n    get capture() {\n      eventOptionsSupported = true;\n      return false;\n    }\n  };\n  // tslint:disable-next-line:no-any\n  window.addEventListener('test', options as any, options);\n  // tslint:disable-next-line:no-any\n  window.removeEventListener('test', options as any, options);\n} catch (_e) {\n}\n\n\ntype EventHandlerWithOptions =\n    EventListenerOrEventListenerObject&Partial<AddEventListenerOptions>;\nexport class EventPart implements Part {\n  element: Element;\n  eventName: string;\n  eventContext?: EventTarget;\n  value: undefined|EventHandlerWithOptions = undefined;\n  _options?: AddEventListenerOptions;\n  _pendingValue: undefined|EventHandlerWithOptions = undefined;\n  _boundHandleEvent: (event: Event) => void;\n\n  constructor(element: Element, eventName: string, eventContext?: EventTarget) {\n    this.element = element;\n    this.eventName = eventName;\n    this.eventContext = eventContext;\n    this._boundHandleEvent = (e) => this.handleEvent(e);\n  }\n\n  setValue(value: undefined|EventHandlerWithOptions): void {\n    this._pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this._pendingValue)) {\n      const directive = this._pendingValue;\n      this._pendingValue = noChange as EventHandlerWithOptions;\n      directive(this);\n    }\n    if (this._pendingValue === noChange) {\n      return;\n    }\n\n    const newListener = this._pendingValue;\n    const oldListener = this.value;\n    const shouldRemoveListener = newListener == null ||\n        oldListener != null &&\n            (newListener.capture !== oldListener.capture ||\n             newListener.once !== oldListener.once ||\n             newListener.passive !== oldListener.passive);\n    const shouldAddListener =\n        newListener != null && (oldListener == null || shouldRemoveListener);\n\n    if (shouldRemoveListener) {\n      this.element.removeEventListener(\n          this.eventName, this._boundHandleEvent, this._options);\n    }\n    if (shouldAddListener) {\n      this._options = getOptions(newListener);\n      this.element.addEventListener(\n          this.eventName, this._boundHandleEvent, this._options);\n    }\n    this.value = newListener;\n    this._pendingValue = noChange as EventHandlerWithOptions;\n  }\n\n  handleEvent(event: Event) {\n    if (typeof this.value === 'function') {\n      this.value.call(this.eventContext || this.element, event);\n    } else {\n      (this.value as EventListenerObject).handleEvent(event);\n    }\n  }\n}\n\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o: AddEventListenerOptions|undefined) => o &&\n    (eventOptionsSupported ?\n         {capture: o.capture, passive: o.passive, once: o.once} :\n         o.capture as AddEventListenerOptions);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\nimport {AttributeCommitter, BooleanAttributePart, EventPart, NodePart, PropertyCommitter} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\n\n/**\n * Creates Parts when a template is instantiated.\n */\nexport class DefaultTemplateProcessor implements TemplateProcessor {\n  /**\n   * Create parts for an attribute-position binding, given the event, attribute\n   * name, and string literals.\n   *\n   * @param element The element containing the binding\n   * @param name  The attribute name\n   * @param strings The string literals. There are always at least two strings,\n   *   event for fully-controlled bindings with a single expression.\n   */\n  handleAttributeExpressions(\n      element: Element, name: string, strings: string[],\n      options: RenderOptions): Part[] {\n    const prefix = name[0];\n    if (prefix === '.') {\n      const comitter = new PropertyCommitter(element, name.slice(1), strings);\n      return comitter.parts;\n    }\n    if (prefix === '@') {\n      return [new EventPart(element, name.slice(1), options.eventContext)];\n    }\n    if (prefix === '?') {\n      return [new BooleanAttributePart(element, name.slice(1), strings)];\n    }\n    const comitter = new AttributeCommitter(element, name, strings);\n    return comitter.parts;\n  }\n  /**\n   * Create parts for a text-position binding.\n   * @param templateFactory\n   */\n  handleTextExpression(options: RenderOptions) {\n    return new NodePart(options);\n  }\n}\n\nexport const defaultTemplateProcessor = new DefaultTemplateProcessor();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\n/**\n * A function type that creates a Template from a TemplateResult.\n *\n * This is a hook into the template-creation process for rendering that\n * requires some modification of templates before they're used, like ShadyCSS,\n * which must add classes to elements and remove styles.\n *\n * Templates should be cached as aggressively as possible, so that many\n * TemplateResults produced from the same expression only do the work of\n * creating the Template the first time.\n *\n * Templates are usually cached by TemplateResult.strings and\n * TemplateResult.type, but may be cached by other keys if this function\n * modifies the template.\n *\n * Note that currently TemplateFactories must not add, remove, or reorder\n * expressions, because there is no way to describe such a modification\n * to render() so that values are interpolated to the correct place in the\n * template instances.\n */\nexport type TemplateFactory = (result: TemplateResult) => Template;\n\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\nexport function templateFactory(result: TemplateResult) {\n  let templateCache = templateCaches.get(result.type);\n  if (templateCache === undefined) {\n    templateCache = {\n      stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n      keyString: new Map<string, Template>()\n    };\n    templateCaches.set(result.type, templateCache);\n  }\n\n  let template = templateCache.stringsArray.get(result.strings);\n  if (template !== undefined) {\n    return template;\n  }\n\n  // If the TemplateStringsArray is new, generate a key from the strings\n  // This key is shared between all templates with identical content\n  const key = result.strings.join(marker);\n\n  // Check if we already have a Template for this key\n  template = templateCache.keyString.get(key);\n  if (template === undefined) {\n    // If we have not seen this key before, create a new Template\n    template = new Template(result, result.getTemplateElement());\n    // Cache the Template for this key\n    templateCache.keyString.set(key, template);\n  }\n\n  // Cache all future queries for this TemplateStringsArray\n  templateCache.stringsArray.set(result.strings, template);\n  return template;\n}\n\n/**\n * The first argument to JS template tags retain identity across multiple\n * calls to a tag for the same literal, so we can cache work done per literal\n * in a Map.\n *\n * Safari currently has a bug which occasionally breaks this behaviour, so we\n * need to cache the Template at two levels. We first cache the\n * TemplateStringsArray, and if that fails, we cache a key constructed by\n * joining the strings array.\n */\nexport type templateCache = {\n  stringsArray: WeakMap<TemplateStringsArray, Template>;\n  keyString: Map<string, Template>;\n};\n\nexport const templateCaches = new Map<string, templateCache>();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {removeNodes} from './dom.js';\nimport {NodePart} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {templateFactory} from './template-factory.js';\nimport {TemplateResult} from './template-result.js';\n\nexport const parts = new WeakMap<Node, NodePart>();\n\n/**\n * Renders a template to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result a TemplateResult created by evaluating a template tag like\n *     `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\nexport const render =\n    (result: TemplateResult,\n     container: Element|DocumentFragment,\n     options?: Partial<RenderOptions>) => {\n      let part = parts.get(container);\n      if (part === undefined) {\n        removeNodes(container, container.firstChild);\n        parts.set(container, part = new NodePart({\n                               templateFactory,\n                               ...options,\n                             }));\n        part.appendInto(container);\n      }\n      part.setValue(result);\n      part.commit();\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n *\n * Main lit-html module.\n *\n * Main exports:\n *\n * -  [[html]]\n * -  [[svg]]\n * -  [[render]]\n *\n * @module lit-html\n * @preferred\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {defaultTemplateProcessor} from './lib/default-template-processor.js';\nimport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\n\nexport {DefaultTemplateProcessor, defaultTemplateProcessor} from './lib/default-template-processor.js';\nexport {directive, DirectiveFn, isDirective} from './lib/directive.js';\n// TODO(justinfagnani): remove line when we get NodePart moving methods\nexport {removeNodes, reparentNodes} from './lib/dom.js';\nexport {noChange, nothing, Part} from './lib/part.js';\nexport {AttributeCommitter, AttributePart, BooleanAttributePart, EventPart, isPrimitive, NodePart, PropertyCommitter, PropertyPart} from './lib/parts.js';\nexport {RenderOptions} from './lib/render-options.js';\nexport {parts, render} from './lib/render.js';\nexport {templateCaches, templateFactory} from './lib/template-factory.js';\nexport {TemplateInstance} from './lib/template-instance.js';\nexport {TemplateProcessor} from './lib/template-processor.js';\nexport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\nexport {createMarker, isTemplatePartActive, Template} from './lib/template.js';\n\ndeclare global {\n  interface Window {\n    litHtmlVersions: string[];\n  }\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.0.0');\n\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport const html = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nexport const svg = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n","export const ADD_TODO = 'ADD_TODO'\nexport const TOGGLE_TODO = 'TOGGLE_TODO'\nexport const DELETE_TODO = 'DELETE_TODO'\nexport const CLEAR_COMPLETED = 'CLEAR_COMPLETED'\nexport const SET_VISIBILITY_FILTER = 'SET_VISIBILITY_FILTER'\n\nexport const VisibilityFilters = {\n  SHOW_ALL: 'SHOW_ALL',\n  SHOW_COMPLETED: 'SHOW_COMPLETED',\n  SHOW_ACTIVE: 'SHOW_ACTIVE'\n}\n\nexport function addTodo (text) {\n  return { type: ADD_TODO, text }\n}\n\nexport function toggleTodo (index) {\n  return { type: TOGGLE_TODO, index }\n}\n\nexport function deleteTodo (index) {\n  return { type: DELETE_TODO, index }\n}\n\nexport function clearCompleted () {\n  return { type: CLEAR_COMPLETED }\n}\n\nexport function setVisibilityFilter (filter) {\n  return { type: SET_VISIBILITY_FILTER, filter }\n}\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers);\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(\"Dispatching while constructing your middleware is not allowed. \" + \"Other middleware would not be applied to this dispatch.\");\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { createStore, combineReducers, bindActionCreators, applyMiddleware, compose, ActionTypes as __DO_NOT_USE__ActionTypes };\n","import { combineReducers } from 'redux'\nimport {\n  ADD_TODO,\n  TOGGLE_TODO,\n  DELETE_TODO,\n  CLEAR_COMPLETED,\n  SET_VISIBILITY_FILTER,\n  VisibilityFilters\n} from './actions'\nconst { SHOW_ALL } = VisibilityFilters\n\nfunction visibilityFilter (state = SHOW_ALL, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return action.filter\n    default:\n      return state\n  }\n}\n\nfunction todos (state = [], action) {\n  switch (action.type) {\n    case ADD_TODO:\n      return [\n        ...state,\n        {\n          text: action.text,\n          completed: false\n        }\n      ]\n    case TOGGLE_TODO:\n      return state.map((todo, index) => {\n        if (index === action.index) {\n          return { ...todo, completed: !todo.completed }\n        }\n        return todo\n      })\n    case DELETE_TODO:\n      return state.filter((_, index) => index !== action.index)\n    case CLEAR_COMPLETED:\n      return state.filter((todo) => todo.completed !== true)\n    default:\n      return state\n  }\n}\n\nconst todoApp = combineReducers({\n  visibilityFilter,\n  todos\n})\n\nexport default todoApp\n","import { createStore } from 'redux'\nimport todoApp from './reducers'\n\nconst store =\n  createStore(todoApp, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\n\nexport default store\n","import { html } from 'lit-html'\nimport { addTodo } from '../store/actions'\nimport store from '../store/store'\n\nfunction onKeyUp (e) {\n  if (e.keyCode === 13) {\n    const text = e.srcElement.value.trim()\n    if (text.length > 0) {\n      store.dispatch(addTodo(e.srcElement.value))\n    }\n    e.srcElement.value = ''\n  }\n}\n\nexport function Header () {\n  return html`\n    <header class='header'>\n      <h1>todos</h1>\n      <input class=\"new-todo\" \n             placeholder=\"What needs to be done?\"\n             autofocus=\"\"\n             @keyup=\"${onKeyUp}\">\n    </header>\n  `\n}\n","import { html } from 'lit-html'\nimport { toggleTodo, deleteTodo } from '../store/actions'\nimport store from '../store/store'\n\nfunction onClickTodo (e) {\n  const index = Number(e.srcElement.getAttribute('data-index'))\n  store.dispatch(toggleTodo(index))\n}\n\nfunction onClickDestroy (e) {\n  const index = Number(e.srcElement.getAttribute('data-index'))\n  store.dispatch(deleteTodo(index))\n}\n\nexport function Todo (todo, id) {\n  return html`\n    <li class=\"${todo.completed ? 'completed' : ''}\">\n      <div class=\"view\">\n        <input class=\"toggle\" \n               .checked=${todo.completed}\n               type=\"checkbox\" \n               data-index=${id}\n               @click=${onClickTodo}>\n\n        <label>${todo.text}</label>\n\n        <button class=\"destroy\" \n                data-index=${id} \n                @click=${onClickDestroy}>\n        </button>\n      </div>\n      <input class=\"edit\" \n             value=\"${todo.text}\">\n    </li>\n  `\n}\n","import { html } from 'lit-html'\nimport { Todo } from './Todo'\nimport { VisibilityFilters } from '../store/actions'\n\nfunction todosByVisibilityFilter (todos, visibilityFilter) {\n  switch (visibilityFilter) {\n    case VisibilityFilters.SHOW_ALL:\n      return todos\n    case VisibilityFilters.SHOW_ACTIVE:\n      return todos.filter((todo) => todo.completed !== true)\n    case VisibilityFilters.SHOW_COMPLETED:\n      return todos.filter((todo) => todo.completed === true)\n  }\n}\n\nexport function Main (todos, visibilityFilter) {\n  const filteredTodos = todosByVisibilityFilter(todos, visibilityFilter)\n\n  return html`\n    <section class=\"main\">\n      <input class=\"toggle-all\" id=\"toggle-all\" type=\"checkbox\">\n      <label for=\"toggle-all\">Mark all as complete</label>\n      <ul class=\"todo-list\">\n        ${filteredTodos.map((todo, i) => html`${Todo(todo, i)}`)}\n      </ul>\n    </section>\n  `\n}\n","import { html } from 'lit-html'\nimport { clearCompleted, VisibilityFilters } from '../store/actions'\nimport store from '../store/store'\n\nfunction onClickClearCompleted () {\n  store.dispatch(clearCompleted())\n}\n\nfunction itemLeftCount (todos) {\n  return todos.length\n}\n\nfunction itemCompletedCount (todos) {\n  return todos.filter((todo) => todo.completed === true).length\n}\n\nexport function Footer (todos, visibilityFilter) {\n  return html`\n    <footer class=\"footer\">\n      <span class=\"todo-count\">\n        <strong>${itemLeftCount(todos)}</strong>\n        item${itemLeftCount(todos) === 1 ? '' : 's'} left\n      </span>\n      <ul class=\"filters\">\n        <li>\n          <a class=${visibilityFilter === VisibilityFilters.SHOW_ALL ? 'selected' : ''}\n             href=\"#/\">All\n          </a>\n        </li>\n        <li>\n          <a class=${visibilityFilter === VisibilityFilters.SHOW_ACTIVE ? 'selected' : ''} \n             href=\"#/active\">Active\n          </a>\n        </li>\n        <li>\n          <a class=${visibilityFilter === VisibilityFilters.SHOW_COMPLETED ? 'selected' : ''}\n             href=\"#/completed\">Completed\n          </a>\n        </li>\n      </ul>\n      ${itemCompletedCount(todos) > 0 ? html`\n      <button class=\"clear-completed\"\n              @click=\"${onClickClearCompleted}\">Clear completed\n      </button>\n      ` : html``}\n   </footer>\n `\n}\n","import { html } from 'lit-html'\nimport { Header } from './Header'\nimport { Main } from './Main'\nimport { Footer } from './Footer'\n\nexport function App (state) {\n  return html`\n    <section class='todoapp'>\n      ${Header()}\n      ${Main(state.todos, state.visibilityFilter)}\n      ${Footer(state.todos, state.visibilityFilter)}\n    </section>\n  `\n}\n","\n\n//\n// Generated on Tue Dec 16 2014 12:13:47 GMT+0100 (CET) by Charlie Robbins, Paolo Fragomeni & the Contributors (Using Codesurgeon).\n// Version 1.2.6\n//\n\n(function (exports) {\n\n/*\n * browser.js: Browser specific functionality for director.\n *\n * (C) 2011, Charlie Robbins, Paolo Fragomeni, & the Contributors.\n * MIT LICENSE\n *\n */\n\nvar dloc = document.location;\n\nfunction dlocHashEmpty() {\n  // Non-IE browsers return '' when the address bar shows '#'; Director's logic\n  // assumes both mean empty.\n  return dloc.hash === '' || dloc.hash === '#';\n}\n\nvar listener = {\n  mode: 'modern',\n  hash: dloc.hash,\n  history: false,\n\n  check: function () {\n    var h = dloc.hash;\n    if (h != this.hash) {\n      this.hash = h;\n      this.onHashChanged();\n    }\n  },\n\n  fire: function () {\n    if (this.mode === 'modern') {\n      this.history === true ? window.onpopstate() : window.onhashchange();\n    }\n    else {\n      this.onHashChanged();\n    }\n  },\n\n  init: function (fn, history) {\n    var self = this;\n    this.history = history;\n\n    if (!Router.listeners) {\n      Router.listeners = [];\n    }\n\n    function onchange(onChangeEvent) {\n      for (var i = 0, l = Router.listeners.length; i < l; i++) {\n        Router.listeners[i](onChangeEvent);\n      }\n    }\n\n    //note IE8 is being counted as 'modern' because it has the hashchange event\n    if ('onhashchange' in window && (document.documentMode === undefined\n      || document.documentMode > 7)) {\n      // At least for now HTML5 history is available for 'modern' browsers only\n      if (this.history === true) {\n        // There is an old bug in Chrome that causes onpopstate to fire even\n        // upon initial page load. Since the handler is run manually in init(),\n        // this would cause Chrome to run it twise. Currently the only\n        // workaround seems to be to set the handler after the initial page load\n        // http://code.google.com/p/chromium/issues/detail?id=63040\n        setTimeout(function() {\n          window.onpopstate = onchange;\n        }, 500);\n      }\n      else {\n        window.onhashchange = onchange;\n      }\n      this.mode = 'modern';\n    }\n    else {\n      //\n      // IE support, based on a concept by Erik Arvidson ...\n      //\n      var frame = document.createElement('iframe');\n      frame.id = 'state-frame';\n      frame.style.display = 'none';\n      document.body.appendChild(frame);\n      this.writeFrame('');\n\n      if ('onpropertychange' in document && 'attachEvent' in document) {\n        document.attachEvent('onpropertychange', function () {\n          if (event.propertyName === 'location') {\n            self.check();\n          }\n        });\n      }\n\n      window.setInterval(function () { self.check(); }, 50);\n\n      this.onHashChanged = onchange;\n      this.mode = 'legacy';\n    }\n\n    Router.listeners.push(fn);\n\n    return this.mode;\n  },\n\n  destroy: function (fn) {\n    if (!Router || !Router.listeners) {\n      return;\n    }\n\n    var listeners = Router.listeners;\n\n    for (var i = listeners.length - 1; i >= 0; i--) {\n      if (listeners[i] === fn) {\n        listeners.splice(i, 1);\n      }\n    }\n  },\n\n  setHash: function (s) {\n    // Mozilla always adds an entry to the history\n    if (this.mode === 'legacy') {\n      this.writeFrame(s);\n    }\n\n    if (this.history === true) {\n      window.history.pushState({}, document.title, s);\n      // Fire an onpopstate event manually since pushing does not obviously\n      // trigger the pop event.\n      this.fire();\n    } else {\n      dloc.hash = (s[0] === '/') ? s : '/' + s;\n    }\n    return this;\n  },\n\n  writeFrame: function (s) {\n    // IE support...\n    var f = document.getElementById('state-frame');\n    var d = f.contentDocument || f.contentWindow.document;\n    d.open();\n    d.write(\"<script>_hash = '\" + s + \"'; onload = parent.listener.syncHash;<script>\");\n    d.close();\n  },\n\n  syncHash: function () {\n    // IE support...\n    var s = this._hash;\n    if (s != dloc.hash) {\n      dloc.hash = s;\n    }\n    return this;\n  },\n\n  onHashChanged: function () {}\n};\n\nvar Router = exports.Router = function (routes) {\n  if (!(this instanceof Router)) return new Router(routes);\n\n  this.params   = {};\n  this.routes   = {};\n  this.methods  = ['on', 'once', 'after', 'before'];\n  this.scope    = [];\n  this._methods = {};\n\n  this._insert = this.insert;\n  this.insert = this.insertEx;\n\n  this.historySupport = (window.history != null ? window.history.pushState : null) != null\n\n  this.configure();\n  this.mount(routes || {});\n};\n\nRouter.prototype.init = function (r) {\n  var self = this\n    , routeTo;\n  this.handler = function(onChangeEvent) {\n    var newURL = onChangeEvent && onChangeEvent.newURL || window.location.hash;\n    var url = self.history === true ? self.getPath() : newURL.replace(/.*#/, '');\n    self.dispatch('on', url.charAt(0) === '/' ? url : '/' + url);\n  };\n\n  listener.init(this.handler, this.history);\n\n  if (this.history === false) {\n    if (dlocHashEmpty() && r) {\n      dloc.hash = r;\n    } else if (!dlocHashEmpty()) {\n      self.dispatch('on', '/' + dloc.hash.replace(/^(#\\/|#|\\/)/, ''));\n    }\n  }\n  else {\n    if (this.convert_hash_in_init) {\n      // Use hash as route\n      routeTo = dlocHashEmpty() && r ? r : !dlocHashEmpty() ? dloc.hash.replace(/^#/, '') : null;\n      if (routeTo) {\n        window.history.replaceState({}, document.title, routeTo);\n      }\n    }\n    else {\n      // Use canonical url\n      routeTo = this.getPath();\n    }\n\n    // Router has been initialized, but due to the chrome bug it will not\n    // yet actually route HTML5 history state changes. Thus, decide if should route.\n    if (routeTo || this.run_in_init === true) {\n      this.handler();\n    }\n  }\n\n  return this;\n};\n\nRouter.prototype.explode = function () {\n  var v = this.history === true ? this.getPath() : dloc.hash;\n  if (v.charAt(1) === '/') { v=v.slice(1) }\n  return v.slice(1, v.length).split(\"/\");\n};\n\nRouter.prototype.setRoute = function (i, v, val) {\n  var url = this.explode();\n\n  if (typeof i === 'number' && typeof v === 'string') {\n    url[i] = v;\n  }\n  else if (typeof val === 'string') {\n    url.splice(i, v, s);\n  }\n  else {\n    url = [i];\n  }\n\n  listener.setHash(url.join('/'));\n  return url;\n};\n\n//\n// ### function insertEx(method, path, route, parent)\n// #### @method {string} Method to insert the specific `route`.\n// #### @path {Array} Parsed path to insert the `route` at.\n// #### @route {Array|function} Route handlers to insert.\n// #### @parent {Object} **Optional** Parent \"routes\" to insert into.\n// insert a callback that will only occur once per the matched route.\n//\nRouter.prototype.insertEx = function(method, path, route, parent) {\n  if (method === \"once\") {\n    method = \"on\";\n    route = function(route) {\n      var once = false;\n      return function() {\n        if (once) return;\n        once = true;\n        return route.apply(this, arguments);\n      };\n    }(route);\n  }\n  return this._insert(method, path, route, parent);\n};\n\nRouter.prototype.getRoute = function (v) {\n  var ret = v;\n\n  if (typeof v === \"number\") {\n    ret = this.explode()[v];\n  }\n  else if (typeof v === \"string\"){\n    var h = this.explode();\n    ret = h.indexOf(v);\n  }\n  else {\n    ret = this.explode();\n  }\n\n  return ret;\n};\n\nRouter.prototype.destroy = function () {\n  listener.destroy(this.handler);\n  return this;\n};\n\nRouter.prototype.getPath = function () {\n  var path = window.location.pathname;\n  if (path.substr(0, 1) !== '/') {\n    path = '/' + path;\n  }\n  return path;\n};\nfunction _every(arr, iterator) {\n  for (var i = 0; i < arr.length; i += 1) {\n    if (iterator(arr[i], i, arr) === false) {\n      return;\n    }\n  }\n}\n\nfunction _flatten(arr) {\n  var flat = [];\n  for (var i = 0, n = arr.length; i < n; i++) {\n    flat = flat.concat(arr[i]);\n  }\n  return flat;\n}\n\nfunction _asyncEverySeries(arr, iterator, callback) {\n  if (!arr.length) {\n    return callback();\n  }\n  var completed = 0;\n  (function iterate() {\n    iterator(arr[completed], function(err) {\n      if (err || err === false) {\n        callback(err);\n        callback = function() {};\n      } else {\n        completed += 1;\n        if (completed === arr.length) {\n          callback();\n        } else {\n          iterate();\n        }\n      }\n    });\n  })();\n}\n\nfunction paramifyString(str, params, mod) {\n  mod = str;\n  for (var param in params) {\n    if (params.hasOwnProperty(param)) {\n      mod = params[param](str);\n      if (mod !== str) {\n        break;\n      }\n    }\n  }\n  return mod === str ? \"([._a-zA-Z0-9-%()]+)\" : mod;\n}\n\nfunction regifyString(str, params) {\n  var matches, last = 0, out = \"\";\n  while (matches = str.substr(last).match(/[^\\w\\d\\- %@&]*\\*[^\\w\\d\\- %@&]*/)) {\n    last = matches.index + matches[0].length;\n    matches[0] = matches[0].replace(/^\\*/, \"([_.()!\\\\ %@&a-zA-Z0-9-]+)\");\n    out += str.substr(0, matches.index) + matches[0];\n  }\n  str = out += str.substr(last);\n  var captures = str.match(/:([^\\/]+)/ig), capture, length;\n  if (captures) {\n    length = captures.length;\n    for (var i = 0; i < length; i++) {\n      capture = captures[i];\n      if (capture.slice(0, 2) === \"::\") {\n        str = capture.slice(1);\n      } else {\n        str = str.replace(capture, paramifyString(capture, params));\n      }\n    }\n  }\n  return str;\n}\n\nfunction terminator(routes, delimiter, start, stop) {\n  var last = 0, left = 0, right = 0, start = (start || \"(\").toString(), stop = (stop || \")\").toString(), i;\n  for (i = 0; i < routes.length; i++) {\n    var chunk = routes[i];\n    if (chunk.indexOf(start, last) > chunk.indexOf(stop, last) || ~chunk.indexOf(start, last) && !~chunk.indexOf(stop, last) || !~chunk.indexOf(start, last) && ~chunk.indexOf(stop, last)) {\n      left = chunk.indexOf(start, last);\n      right = chunk.indexOf(stop, last);\n      if (~left && !~right || !~left && ~right) {\n        var tmp = routes.slice(0, (i || 1) + 1).join(delimiter);\n        routes = [ tmp ].concat(routes.slice((i || 1) + 1));\n      }\n      last = (right > left ? right : left) + 1;\n      i = 0;\n    } else {\n      last = 0;\n    }\n  }\n  return routes;\n}\n\nvar QUERY_SEPARATOR = /\\?.*/;\n\nRouter.prototype.configure = function(options) {\n  options = options || {};\n  for (var i = 0; i < this.methods.length; i++) {\n    this._methods[this.methods[i]] = true;\n  }\n  this.recurse = options.recurse || this.recurse || false;\n  this.async = options.async || false;\n  this.delimiter = options.delimiter || \"/\";\n  this.strict = typeof options.strict === \"undefined\" ? true : options.strict;\n  this.notfound = options.notfound;\n  this.resource = options.resource;\n  this.history = options.html5history && this.historySupport || false;\n  this.run_in_init = this.history === true && options.run_handler_in_init !== false;\n  this.convert_hash_in_init = this.history === true && options.convert_hash_in_init !== false;\n  this.every = {\n    after: options.after || null,\n    before: options.before || null,\n    on: options.on || null\n  };\n  return this;\n};\n\nRouter.prototype.param = function(token, matcher) {\n  if (token[0] !== \":\") {\n    token = \":\" + token;\n  }\n  var compiled = new RegExp(token, \"g\");\n  this.params[token] = function(str) {\n    return str.replace(compiled, matcher.source || matcher);\n  };\n  return this;\n};\n\nRouter.prototype.on = Router.prototype.route = function(method, path, route) {\n  var self = this;\n  if (!route && typeof path == \"function\") {\n    route = path;\n    path = method;\n    method = \"on\";\n  }\n  if (Array.isArray(path)) {\n    return path.forEach(function(p) {\n      self.on(method, p, route);\n    });\n  }\n  if (path.source) {\n    path = path.source.replace(/\\\\\\//ig, \"/\");\n  }\n  if (Array.isArray(method)) {\n    return method.forEach(function(m) {\n      self.on(m.toLowerCase(), path, route);\n    });\n  }\n  path = path.split(new RegExp(this.delimiter));\n  path = terminator(path, this.delimiter);\n  this.insert(method, this.scope.concat(path), route);\n};\n\nRouter.prototype.path = function(path, routesFn) {\n  var self = this, length = this.scope.length;\n  if (path.source) {\n    path = path.source.replace(/\\\\\\//ig, \"/\");\n  }\n  path = path.split(new RegExp(this.delimiter));\n  path = terminator(path, this.delimiter);\n  this.scope = this.scope.concat(path);\n  routesFn.call(this, this);\n  this.scope.splice(length, path.length);\n};\n\nRouter.prototype.dispatch = function(method, path, callback) {\n  var self = this, fns = this.traverse(method, path.replace(QUERY_SEPARATOR, \"\"), this.routes, \"\"), invoked = this._invoked, after;\n  this._invoked = true;\n  if (!fns || fns.length === 0) {\n    this.last = [];\n    if (typeof this.notfound === \"function\") {\n      this.invoke([ this.notfound ], {\n        method: method,\n        path: path\n      }, callback);\n    }\n    return false;\n  }\n  if (this.recurse === \"forward\") {\n    fns = fns.reverse();\n  }\n  function updateAndInvoke() {\n    self.last = fns.after;\n    self.invoke(self.runlist(fns), self, callback);\n  }\n  after = this.every && this.every.after ? [ this.every.after ].concat(this.last) : [ this.last ];\n  if (after && after.length > 0 && invoked) {\n    if (this.async) {\n      this.invoke(after, this, updateAndInvoke);\n    } else {\n      this.invoke(after, this);\n      updateAndInvoke();\n    }\n    return true;\n  }\n  updateAndInvoke();\n  return true;\n};\n\nRouter.prototype.invoke = function(fns, thisArg, callback) {\n  var self = this;\n  var apply;\n  if (this.async) {\n    apply = function(fn, next) {\n      if (Array.isArray(fn)) {\n        return _asyncEverySeries(fn, apply, next);\n      } else if (typeof fn == \"function\") {\n        fn.apply(thisArg, (fns.captures || []).concat(next));\n      }\n    };\n    _asyncEverySeries(fns, apply, function() {\n      if (callback) {\n        callback.apply(thisArg, arguments);\n      }\n    });\n  } else {\n    apply = function(fn) {\n      if (Array.isArray(fn)) {\n        return _every(fn, apply);\n      } else if (typeof fn === \"function\") {\n        return fn.apply(thisArg, fns.captures || []);\n      } else if (typeof fn === \"string\" && self.resource) {\n        self.resource[fn].apply(thisArg, fns.captures || []);\n      }\n    };\n    _every(fns, apply);\n  }\n};\n\nRouter.prototype.traverse = function(method, path, routes, regexp, filter) {\n  var fns = [], current, exact, match, next, that;\n  function filterRoutes(routes) {\n    if (!filter) {\n      return routes;\n    }\n    function deepCopy(source) {\n      var result = [];\n      for (var i = 0; i < source.length; i++) {\n        result[i] = Array.isArray(source[i]) ? deepCopy(source[i]) : source[i];\n      }\n      return result;\n    }\n    function applyFilter(fns) {\n      for (var i = fns.length - 1; i >= 0; i--) {\n        if (Array.isArray(fns[i])) {\n          applyFilter(fns[i]);\n          if (fns[i].length === 0) {\n            fns.splice(i, 1);\n          }\n        } else {\n          if (!filter(fns[i])) {\n            fns.splice(i, 1);\n          }\n        }\n      }\n    }\n    var newRoutes = deepCopy(routes);\n    newRoutes.matched = routes.matched;\n    newRoutes.captures = routes.captures;\n    newRoutes.after = routes.after.filter(filter);\n    applyFilter(newRoutes);\n    return newRoutes;\n  }\n  if (path === this.delimiter && routes[method]) {\n    next = [ [ routes.before, routes[method] ].filter(Boolean) ];\n    next.after = [ routes.after ].filter(Boolean);\n    next.matched = true;\n    next.captures = [];\n    return filterRoutes(next);\n  }\n  for (var r in routes) {\n    if (routes.hasOwnProperty(r) && (!this._methods[r] || this._methods[r] && typeof routes[r] === \"object\" && !Array.isArray(routes[r]))) {\n      current = exact = regexp + this.delimiter + r;\n      if (!this.strict) {\n        exact += \"[\" + this.delimiter + \"]?\";\n      }\n      match = path.match(new RegExp(\"^\" + exact));\n      if (!match) {\n        continue;\n      }\n      if (match[0] && match[0] == path && routes[r][method]) {\n        next = [ [ routes[r].before, routes[r][method] ].filter(Boolean) ];\n        next.after = [ routes[r].after ].filter(Boolean);\n        next.matched = true;\n        next.captures = match.slice(1);\n        if (this.recurse && routes === this.routes) {\n          next.push([ routes.before, routes.on ].filter(Boolean));\n          next.after = next.after.concat([ routes.after ].filter(Boolean));\n        }\n        return filterRoutes(next);\n      }\n      next = this.traverse(method, path, routes[r], current);\n      if (next.matched) {\n        if (next.length > 0) {\n          fns = fns.concat(next);\n        }\n        if (this.recurse) {\n          fns.push([ routes[r].before, routes[r].on ].filter(Boolean));\n          next.after = next.after.concat([ routes[r].after ].filter(Boolean));\n          if (routes === this.routes) {\n            fns.push([ routes[\"before\"], routes[\"on\"] ].filter(Boolean));\n            next.after = next.after.concat([ routes[\"after\"] ].filter(Boolean));\n          }\n        }\n        fns.matched = true;\n        fns.captures = next.captures;\n        fns.after = next.after;\n        return filterRoutes(fns);\n      }\n    }\n  }\n  return false;\n};\n\nRouter.prototype.insert = function(method, path, route, parent) {\n  var methodType, parentType, isArray, nested, part;\n  path = path.filter(function(p) {\n    return p && p.length > 0;\n  });\n  parent = parent || this.routes;\n  part = path.shift();\n  if (/\\:|\\*/.test(part) && !/\\\\d|\\\\w/.test(part)) {\n    part = regifyString(part, this.params);\n  }\n  if (path.length > 0) {\n    parent[part] = parent[part] || {};\n    return this.insert(method, path, route, parent[part]);\n  }\n  if (!part && !path.length && parent === this.routes) {\n    methodType = typeof parent[method];\n    switch (methodType) {\n     case \"function\":\n      parent[method] = [ parent[method], route ];\n      return;\n     case \"object\":\n      parent[method].push(route);\n      return;\n     case \"undefined\":\n      parent[method] = route;\n      return;\n    }\n    return;\n  }\n  parentType = typeof parent[part];\n  isArray = Array.isArray(parent[part]);\n  if (parent[part] && !isArray && parentType == \"object\") {\n    methodType = typeof parent[part][method];\n    switch (methodType) {\n     case \"function\":\n      parent[part][method] = [ parent[part][method], route ];\n      return;\n     case \"object\":\n      parent[part][method].push(route);\n      return;\n     case \"undefined\":\n      parent[part][method] = route;\n      return;\n    }\n  } else if (parentType == \"undefined\") {\n    nested = {};\n    nested[method] = route;\n    parent[part] = nested;\n    return;\n  }\n  throw new Error(\"Invalid route context: \" + parentType);\n};\n\n\n\nRouter.prototype.extend = function(methods) {\n  var self = this, len = methods.length, i;\n  function extend(method) {\n    self._methods[method] = true;\n    self[method] = function() {\n      var extra = arguments.length === 1 ? [ method, \"\" ] : [ method ];\n      self.on.apply(self, extra.concat(Array.prototype.slice.call(arguments)));\n    };\n  }\n  for (i = 0; i < len; i++) {\n    extend(methods[i]);\n  }\n};\n\nRouter.prototype.runlist = function(fns) {\n  var runlist = this.every && this.every.before ? [ this.every.before ].concat(_flatten(fns)) : _flatten(fns);\n  if (this.every && this.every.on) {\n    runlist.push(this.every.on);\n  }\n  runlist.captures = fns.captures;\n  runlist.source = fns.source;\n  return runlist;\n};\n\nRouter.prototype.mount = function(routes, path) {\n  if (!routes || typeof routes !== \"object\" || Array.isArray(routes)) {\n    return;\n  }\n  var self = this;\n  path = path || [];\n  if (!Array.isArray(path)) {\n    path = path.split(self.delimiter);\n  }\n  function insertOrMount(route, local) {\n    var rename = route, parts = route.split(self.delimiter), routeType = typeof routes[route], isRoute = parts[0] === \"\" || !self._methods[parts[0]], event = isRoute ? \"on\" : rename;\n    if (isRoute) {\n      rename = rename.slice((rename.match(new RegExp(\"^\" + self.delimiter)) || [ \"\" ])[0].length);\n      parts.shift();\n    }\n    if (isRoute && routeType === \"object\" && !Array.isArray(routes[route])) {\n      local = local.concat(parts);\n      self.mount(routes[route], local);\n      return;\n    }\n    if (isRoute) {\n      local = local.concat(rename.split(self.delimiter));\n      local = terminator(local, self.delimiter);\n    }\n    self.insert(event, local, routes[route]);\n  }\n  for (var route in routes) {\n    if (routes.hasOwnProperty(route)) {\n      insertOrMount(route, path.slice(0));\n    }\n  }\n};\n\n\n\n}(typeof exports === \"object\" ? exports : window));","import { App } from './components/App'\nimport { render } from 'lit-html'\nimport { Router } from 'director/build/director'\nimport store from './store/store'\nimport { setVisibilityFilter, VisibilityFilters } from './store/actions'\n\nconst router = new Router();\n\nrouter.on('all', () => store.dispatch(setVisibilityFilter(VisibilityFilters.SHOW_ALL)))\nrouter.on('active', () => store.dispatch(setVisibilityFilter(VisibilityFilters.SHOW_ACTIVE)))\nrouter.on('completed', () => store.dispatch(setVisibilityFilter(VisibilityFilters.SHOW_COMPLETED)))\n\nrouter.configure({\n  notfound: () => {\n    window.location.hash = ''\n    store.dispatch(setVisibilityFilter(VisibilityFilters.SHOW_ALL))\n  }\n})\n\nfunction renderApp () {\n  render(App(store.getState()), document.body)\n}\nstore.subscribe(renderApp)\n\nrouter.init()\nrenderApp()\n"]}